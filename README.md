# AES_Encryption_Decryption
this repository contains the AES node.js encryption and decryption algorithm to perform the encryption/decryption on data using the 32 byte key generated by Kyber alogrithm


## File encryption

import crypto on top of your js file
```
const crypto = require('crypto');
const fs = require('fs');
```
to run the code write in terminal 
```
node "name of the script file".js
```
execution time
```
console.time("Total Execution Time");
```
add name and path of you filed to be encrypted and add the key
```
const filePath = 'your/file/path';
const key = 'your 32 byte key'; // Replace with your 32-byte key

fs.readFile(filePath, (err, data) => {
  if (err) {
    console.error(err);
    return;
  } //check for file path
```
track encryption time and generate IV (Initialization vector)

each time program runs it generate new iv incase you want to perform double encryption with 2 keys, name the 2nd iv as iv2.txt and save it seperately in fs.writeFile('') for the clarification between first iv and 2nd iv, to later on import the correct iv for the decryption process.

```
  console.time("Encryption time");
  const iv = crypto.randomBytes(16); // Generate IV

  const cipher = crypto.createCipheriv('aes-256-cbc', Buffer.from(key, 'hex'), iv);
  const encryptedData = Buffer.concat([cipher.update(data), cipher.final()]);
  console.timeEnd("Encryption time");

  const encryptedFilePath = 'renamed file'; //enter the name of the file to which the file should be renamed after encryption is done

  // Save the IV to a separate file (e.g., iv.txt)

  fs.writeFile('iv.txt', iv, (err) => {
    if (err) {
      console.error('Error saving IV:', err);
    }
  });
```
writing and saving file to the new path provide above
```
  fs.writeFile(encryptedFilePath, encryptedData, (err) => {
    if (err) {
      console.error(err);
    } else {
      console.log('.exe file encrypted with 1st or 2nd key successfully!');
    }
    console.log(`Writing encrypted file to: ${encryptedFilePath}`); //saving encrypted file as named path
  });
});

console.timeEnd("Total Execution Time");  //total program execution time traking end
```


## File Decrypt

This section contains the code from the file decrypt.js script

import crypto on top of the file
```
const crypto = require('crypto');
const fs = require('fs');
```
main begin here

provide the file path and iv path that were added during the encryption if both are matched then it will decrypt.
provide the path of the corresponding iv along with the correct key, incase you are decrypting a file which is encrypted two times with different keys then you have to change and use the key value and iv value appropriately used for the encryption of that file after decrypting it to obtain the original file.
```
console.time("Total Execution Time"); //tracking total program execution time

const filePath = 'name/path/of_your_file'; // Replace with your encrypted file path
const key = '32 byte key without spaces'; // Replace with your 32-byte key
const iv = fs.readFileSync('iv.txt'); // Read IV from a stored separate file if iv file is stored in other folder provide path of it

fs.readFile(filePath, (err, encryptedData) => {
  if (err) {
    console.error(err);
    return;
  }
```
decrypt the file and store it.
if you have two files to decrypt than first decrypt it and name the file as decrypted first and then provide the path of the decrypted file again to decrypt it again with 2nd key
```
  console.time("Decryption time");
  const decipher = crypto.createDecipheriv('aes-256-cbc', Buffer.from(key, 'hex'), Buffer.from(iv));
  const decryptedData = Buffer.concat([decipher.update(encryptedData), decipher.final()]);
  console.timeEnd("Decryption time");

  const decryptedFilePath = 'rename_file'; //rename file to other name than orignal to store seperately
  fs.writeFile(decryptedFilePath, decryptedData, (err) => {
    if (err) {
      console.error(err);
    } else {
      console.log('.exe decrypted with 1st or 2nd key successfully!');
    }
  });
});
console.timeEnd("Total Execution Time");
```
